{"version":3,"file":"script.min.js","sources":["js/config.js","js/displayHomepage.js","js/main.js","js/utils.js","js/goToTargetURL.js"],"sourcesContent":["export const corsProxy = \"https://corsproxy.io/?\";\n\nconst isGithub = window.location.href.includes(\"github\");\n\nconst issuesURLGitlab =\n\t\"https://forge.apps.education.fr/url/url.forge.apps.education.fr/-/issues/\";\nconst issuesURLGithub = \"https://github.com/eyssette/url/issues/\";\n\nexport const issuesURL = isGithub ? issuesURLGithub : issuesURLGitlab;\n\nconst stringIssueGitlab = \" \\\\(#\";\nconst stringIssueGithub = \" ¬∑ Issue #\";\nconst stringIssue = isGithub ? stringIssueGithub : stringIssueGitlab;\nexport const baseRegexToFindTargeURL = \"<title>(.*?)\" + stringIssue;\n","import { issuesURL } from \"./config\";\n\nconst homepageContent = `\n<h1>üîó Raccourcisseur de lien</h1>\n<p>Pour utiliser ce raccourcisseur de lien, il faut laisser un ticket √† cette adresse : <a href=\"${issuesURL}\">${issuesURL}</a></p>\n<p>Il suffit de cr√©er un nouveau ticket en mettant l'URL √† raccourcir dans le titre du ticket</p>\n<p>Si votre num√©ro de ticket est le 1, alors votre raccourci sera alors le suivant : <a href=\"${window.location.href}#1\" target=\"_blank\">${window.location.href}#1</a></p>\n`;\n\nexport function displayHomepage() {\n\tdocument.body.innerHTML = homepageContent;\n}\n","import { toNumber } from \"./utils\";\nimport { goToTargetURL } from \"./goToTargetURL\";\nimport { displayHomepage } from \"./displayHomepage\";\n\n// On r√©cup√®re l'ID apr√®s le hash\nconst targetID = window.location.hash.substring(1).replace(/\\?.*/, \"\");\nconst targetIDtoNumber = toNumber(targetID);\n\nif (targetIDtoNumber) {\n\tgoToTargetURL(targetIDtoNumber);\n} else {\n\tdisplayHomepage();\n}\n","export function toNumber(value) {\n\t// V√©rifie si la valeur est d√©j√† un nombre\n\tif (typeof value === \"number\" && !isNaN(value)) {\n\t\treturn value;\n\t}\n\n\t// Tente de convertir en nombre si c'est une cha√Æne de caract√®res\n\tconst convertedValue = Number(value);\n\tif (!isNaN(convertedValue)) {\n\t\treturn convertedValue;\n\t}\n\n\t// Retourne null si la conversion a √©chou√©\n\treturn null;\n}\n","import { corsProxy, issuesURL, baseRegexToFindTargeURL } from \"./config\";\n\n// On redirige vers l'URL correspondante\nexport async function goToTargetURL(targetID) {\n\tconst url = corsProxy + issuesURL + targetID;\n\n\ttry {\n\t\tconst response = await fetch(url);\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(`HTTP error! Status: ${response.status}`);\n\t\t}\n\n\t\tconst html = await response.text();\n\t\tconst regex = baseRegexToFindTargeURL + targetID;\n\t\tconst titleElement = html.match(regex);\n\n\t\tlet targetURL;\n\t\tif (titleElement) {\n\t\t\ttargetURL = titleElement[1].trim();\n\t\t}\n\t\twindow.location.href = targetURL;\n\t} catch (error) {\n\t\tconsole.error(\"Erreur lors de la r√©cup√©ration de l'issue :\", error);\n\t\treturn null;\n\t}\n}\n"],"names":["isGithub","window","location","href","includes","issuesURL","baseRegexToFindTargeURL","homepageContent","targetIDtoNumber","value","isNaN","convertedValue","Number","toNumber","hash","substring","replace","async","targetID","url","response","fetch","ok","Error","status","html","text","regex","titleElement","match","targetURL","trim","error","console","goToTargetURL","document","body","innerHTML"],"mappings":"yBAAO,MAEDA,EAAWC,OAAOC,SAASC,KAAKC,SAAS,UAMlCC,EAAYL,EAFD,0CADvB,4EAQYM,EAA0B,gBADnBN,EADM,aADA,SCR1B,MAAMO,EAAkB,0IAE2EF,MAAcA,+MAEjBJ,OAAOC,SAASC,2BAA2BF,OAAOC,SAASC,mBCD3J,MACMK,ECNC,SAAkBC,GAExB,GAAqB,iBAAVA,IAAuBC,MAAMD,GACvC,OAAOA,EAIR,MAAME,EAAiBC,OAAOH,GAC9B,OAAKC,MAAMC,GAKJ,KAJCA,CAKT,CDRyBE,CADRZ,OAAOC,SAASY,KAAKC,UAAU,GAAGC,QAAQ,OAAQ,KAG/DR,EELGS,eAA6BC,GACnC,MAAMC,EJJkB,yBIIAd,EAAYa,EAEpC,IACC,MAAME,QAAiBC,MAAMF,GAC7B,IAAKC,EAASE,GACb,MAAM,IAAIC,MAAM,uBAAuBH,EAASI,UAGjD,MAAMC,QAAaL,EAASM,OACtBC,EAAQrB,EAA0BY,EAClCU,EAAeH,EAAKI,MAAMF,GAEhC,IAAIG,EACAF,IACHE,EAAYF,EAAa,GAAGG,QAE7B9B,OAAOC,SAASC,KAAO2B,CACvB,CAAC,MAAOE,GAER,OADAC,QAAQD,MAAM,8CAA+CA,GACtD,IACP,CACF,CFhBCE,CAAc1B,GDCd2B,SAASC,KAAKC,UAAY9B"}