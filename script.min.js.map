{"version":3,"file":"script.min.js","sources":["js/config.js","js/displayHomepage.js","js/main.js","js/utils.js","js/goToTargetURL.js","js/goToTicketURL.js"],"sourcesContent":["export const corsProxy = \"https://corsproxy.io/?\";\n\nconst isGithub = window.location.href.includes(\"github\");\n\nconst issuesURLGitlab =\n\t\"https://forge.apps.education.fr/url/url.forge.apps.education.fr/-/issues/\";\nconst issuesURLGithub = \"https://github.com/eyssette/url/issues/\";\n\nexport const issuesURL = isGithub ? issuesURLGithub : issuesURLGitlab;\nexport const newIssueURL = isGithub\n\t? issuesURLGithub + \"new?title=\"\n\t: issuesURLGitlab + \"new?issue[title]=\";\n\nconst stringIssueGitlab = \" \\\\(#\";\nconst stringIssueGithub = \" ¬∑ Issue #\";\nconst stringIssue = isGithub ? stringIssueGithub : stringIssueGitlab;\nexport const baseRegexToFindTargeURL = \"<title>(.*?)\" + stringIssue;\n","import { issuesURL } from \"./config\";\nimport { goToTicketURL } from \"./goToTicketURL\";\n\nconst homepageContent = `\n<h1>üîó Raccourcisseur de lien</h1>\n<p>Pour utiliser ce raccourcisseur de lien, il faut laisser un ticket √† cette <a href=\"${issuesURL}\">adresse</a> en mettant l'URL √† raccourcir dans le titre du ticket.</p>\n<div>Pour aller plus vite, <label for=\"urlInput\">indiquez ici l'URL √† raccourcir :</label> <div><input type=\"text\" id=\"urlInput\" placeholder=\"Entrez l'URL ici\"> <button id=\"okButton\">Cr√©er le ticket</button></div></div>\n<p>Seuls les utilisateurs authentifi√©s peuvent cr√©er un ticket.</p>\n<p>Si votre num√©ro de ticket est le 1, alors votre raccourci sera le suivant : <a href=\"${window.location.href}#1\" target=\"_blank\">${window.location.href}#1</a></p>\n<p>On ne peut avoir que des raccourcis num√©riques, qui correspondent au num√©ro du ticket, et on ne peut pas les personnaliser pour que l'URL soit signifiante.</p>\n<p>Il est possible de modifier ult√©rieurement son raccourci en modifiant son ticket.</p>\n<div class=\"admonition warning\">\n  <p class=\"admonition-title\">Attention</p>\n  <p>Les raccourcis sont <strong>publics</strong> : on ne peut pas cr√©er de raccourci priv√©. Tout le monde peut voir les raccourcis et identifier les personnes qui les ont cr√©√©s, en allant sur la page des tickets de cet outil.</p>\n</div>\n`;\n\nexport function displayHomepage() {\n\tdocument.body.innerHTML = homepageContent;\n\tgoToTicketURL();\n}\n","import \"../css/styles.css\";\nimport { toNumber } from \"./utils\";\nimport { goToTargetURL } from \"./goToTargetURL\";\nimport { displayHomepage } from \"./displayHomepage\";\n\n// On r√©cup√®re l'ID apr√®s le hash\nconst targetID = window.location.hash.substring(1).replace(/\\?.*/, \"\");\nconst targetIDtoNumber = toNumber(targetID);\n\nif (targetIDtoNumber) {\n\tgoToTargetURL(targetIDtoNumber);\n} else {\n\tdisplayHomepage();\n}\n","export function toNumber(value) {\n\t// V√©rifie si la valeur est d√©j√† un nombre\n\tif (typeof value === \"number\" && !isNaN(value)) {\n\t\treturn value;\n\t}\n\n\t// Tente de convertir en nombre si c'est une cha√Æne de caract√®res\n\tconst convertedValue = Number(value);\n\tif (!isNaN(convertedValue)) {\n\t\treturn convertedValue;\n\t}\n\n\t// Retourne null si la conversion a √©chou√©\n\treturn null;\n}\n","import { corsProxy, issuesURL, baseRegexToFindTargeURL } from \"./config\";\n\n// On redirige vers l'URL correspondante\nexport async function goToTargetURL(targetID) {\n\tconst url = corsProxy + issuesURL + targetID;\n\n\ttry {\n\t\tconst response = await fetch(url);\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(`HTTP error! Status: ${response.status}`);\n\t\t}\n\n\t\tconst html = await response.text();\n\t\tconst regex = baseRegexToFindTargeURL + targetID;\n\t\tconst titleElement = html.match(regex);\n\n\t\tlet targetURL;\n\t\tif (titleElement) {\n\t\t\ttargetURL = titleElement[1].trim();\n\t\t}\n\t\twindow.location.href = targetURL;\n\t} catch (error) {\n\t\tconsole.error(\"Erreur lors de la r√©cup√©ration de l'issue :\", error);\n\t\treturn null;\n\t}\n}\n","import { newIssueURL } from \"./config\";\n\nexport function goToTicketURL() {\n\tdocument.getElementById(\"okButton\").addEventListener(\"click\", function () {\n\t\tconst URLtoShorten = encodeURIComponent(\n\t\t\tdocument.getElementById(\"urlInput\").value.trim(),\n\t\t);\n\t\tif (URLtoShorten) {\n\t\t\twindow.location.href = newIssueURL + URLtoShorten;\n\t\t} else {\n\t\t\talert(\"Veuillez entrer une URL valide.\");\n\t\t}\n\t});\n}\n"],"names":["isGithub","window","location","href","includes","issuesURLGitlab","issuesURLGithub","issuesURL","newIssueURL","baseRegexToFindTargeURL","homepageContent","targetIDtoNumber","value","isNaN","convertedValue","Number","toNumber","hash","substring","replace","async","targetID","url","response","fetch","ok","Error","status","html","text","regex","titleElement","match","targetURL","trim","error","console","goToTargetURL","document","body","innerHTML","getElementById","addEventListener","URLtoShorten","encodeURIComponent","alert"],"mappings":"yBAAO,MAEDA,EAAWC,OAAOC,SAASC,KAAKC,SAAS,UAEzCC,EACL,4EACKC,EAAkB,0CAEXC,EAAYP,EAAWM,EAAkBD,EACzCG,EAAcR,EACxBM,EAAkB,aAClBD,EAAkB,oBAKRI,EAA0B,gBADnBT,EADM,aADA,SCV1B,MAAMU,EAAkB,gIAEiEH,wcAGCN,OAAOC,SAASC,2BAA2BF,OAAOC,SAASC,glBCFrJ,MACMQ,ECPC,SAAkBC,GAExB,GAAqB,iBAAVA,IAAuBC,MAAMD,GACvC,OAAOA,EAIR,MAAME,EAAiBC,OAAOH,GAC9B,OAAKC,MAAMC,GAKJ,KAJCA,CAKT,CDPyBE,CADRf,OAAOC,SAASe,KAAKC,UAAU,GAAGC,QAAQ,OAAQ,KAG/DR,EENGS,eAA6BC,GACnC,MAAMC,EJJkB,yBIIAf,EAAYc,EAEpC,IACC,MAAME,QAAiBC,MAAMF,GAC7B,IAAKC,EAASE,GACb,MAAM,IAAIC,MAAM,uBAAuBH,EAASI,UAGjD,MAAMC,QAAaL,EAASM,OACtBC,EAAQrB,EAA0BY,EAClCU,EAAeH,EAAKI,MAAMF,GAEhC,IAAIG,EACAF,IACHE,EAAYF,EAAa,GAAGG,QAE7BjC,OAAOC,SAASC,KAAO8B,CACvB,CAAC,MAAOE,GAER,OADAC,QAAQD,MAAM,8CAA+CA,GACtD,IACP,CACF,CFfCE,CAAc1B,IDQd2B,SAASC,KAAKC,UAAY9B,EIf1B4B,SAASG,eAAe,YAAYC,iBAAiB,SAAS,WAC7D,MAAMC,EAAeC,mBACpBN,SAASG,eAAe,YAAY7B,MAAMsB,QAEvCS,EACH1C,OAAOC,SAASC,KAAOK,EAAcmC,EAErCE,MAAM,kCAET"}