{"version":3,"file":"script.min.js","sources":["js/config.js","js/displayHomepage.js","js/main.js","js/utils.js","js/goToTargetURL.js","js/goToTicketURL.js"],"sourcesContent":["export const isGithub = window.location.href.includes(\"github\");\n\nconst issuesURLGitlab =\n\t\"https://forge.apps.education.fr/url/url.forge.apps.education.fr/-/issues/\";\nconst issuesURLGithub = \"https://github.com/eyssette/url/issues/\";\n\nexport const issuesURLGitlabAPI =\n\t\"https://forge.apps.education.fr/api/v4/projects/2569/issues?scope=all\";\nexport const issuesURLGithubAPI =\n\t\"https://api.github.com/repos/eyssette/url/issues\";\n\nexport const issuesURL = isGithub ? issuesURLGithub : issuesURLGitlab;\nexport const newIssueURL = isGithub\n\t? issuesURLGithub + \"new?title=\"\n\t: issuesURLGitlab + \"new?issue[title]=\";\n","import { issuesURL } from \"./config\";\nimport { goToTicketURL } from \"./goToTicketURL\";\n\nconst homepageContent = `\n<h1>üîó Raccourcisseur de lien</h1>\n<p>Pour utiliser ce raccourcisseur de lien, il faut laisser un ticket √† cette <a href=\"${issuesURL}\">adresse</a> en mettant l'URL √† raccourcir dans le titre du ticket.</p>\n<div>Pour aller plus vite, <label for=\"urlInput\">indiquez ici l'URL √† raccourcir :</label> <div><input type=\"text\" id=\"urlInput\" placeholder=\"Entrez l'URL ici\"> <button id=\"okButton\">Cr√©er le ticket</button></div></div>\n<p>Seuls les utilisateurs authentifi√©s peuvent cr√©er un ticket.</p>\n<p>Si votre num√©ro de ticket est le 1, alors votre raccourci sera le suivant : <a href=\"${window.location.href}#1\" target=\"_blank\">${window.location.href}#1</a></p>\n<p>On ne peut avoir que des raccourcis num√©riques, qui correspondent au num√©ro du ticket, et on ne peut pas les personnaliser pour que l'URL soit signifiante.</p>\n<p>Il est possible de modifier ult√©rieurement son raccourci en modifiant son ticket.</p>\n<div class=\"admonition warning\">\n  <p class=\"admonition-title\">Attention</p>\n  <p>Les raccourcis sont <strong>publics</strong> : on ne peut pas cr√©er de raccourci priv√©. Tout le monde peut voir les raccourcis et identifier les personnes qui les ont cr√©√©s, en allant sur la page des tickets de cet outil.</p>\n</div>\n`;\n\nexport function displayHomepage() {\n\tdocument.body.innerHTML = homepageContent;\n\tgoToTicketURL();\n}\n","import \"../css/styles.css\";\nimport { toNumber } from \"./utils\";\nimport { goToTargetURL } from \"./goToTargetURL\";\nimport { displayHomepage } from \"./displayHomepage\";\n\n// On r√©cup√®re l'ID apr√®s le hash\nconst targetID = window.location.hash.substring(1).replace(/\\?.*/, \"\");\nconst targetIDtoNumber = toNumber(targetID);\n\nif (targetIDtoNumber) {\n\tgoToTargetURL(targetIDtoNumber);\n} else {\n\tdisplayHomepage();\n}\n","export function toNumber(value) {\n\t// V√©rifie si la valeur est d√©j√† un nombre\n\tif (typeof value === \"number\" && !isNaN(value)) {\n\t\treturn value;\n\t}\n\n\t// Tente de convertir en nombre si c'est une cha√Æne de caract√®res\n\tconst convertedValue = Number(value);\n\tif (!isNaN(convertedValue)) {\n\t\treturn convertedValue;\n\t}\n\n\t// Retourne null si la conversion a √©chou√©\n\treturn null;\n}\n","import { isGithub, issuesURLGitlabAPI, issuesURLGithubAPI } from \"./config\";\n\nfunction filterJson(element, targetID) {\n\treturn isGithub ? element.number == targetID : element.iid == targetID;\n}\n\n// On redirige vers l'URL correspondante\nexport async function goToTargetURL(targetID) {\n\tconst url = isGithub ? issuesURLGithubAPI : issuesURLGitlabAPI;\n\n\tfetch(url, {\n\t\tmethod: \"GET\",\n\t\theaders: {\n\t\t\tAccept: \"application/json\",\n\t\t},\n\t})\n\t\t.then((response) => {\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`HTTP error! Status: ${response.status}`);\n\t\t\t}\n\t\t\treturn response.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\tconst target = json.filter((element) => filterJson(element, targetID));\n\t\t\tif (target.length > 0) {\n\t\t\t\tconst targetURL = target[0].title;\n\t\t\t\twindow.location.href = targetURL;\n\t\t\t}\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(\"Error fetching data:\", error);\n\t\t});\n}\n","import { newIssueURL } from \"./config\";\n\nexport function goToTicketURL() {\n\tdocument.getElementById(\"okButton\").addEventListener(\"click\", function () {\n\t\tconst URLtoShorten = encodeURIComponent(\n\t\t\tdocument.getElementById(\"urlInput\").value.trim(),\n\t\t);\n\t\tif (URLtoShorten) {\n\t\t\twindow.location.href = newIssueURL + URLtoShorten;\n\t\t} else {\n\t\t\talert(\"Veuillez entrer une URL valide.\");\n\t\t}\n\t});\n}\n"],"names":["isGithub","window","location","href","includes","issuesURLGitlab","issuesURLGithub","newIssueURL","homepageContent","targetIDtoNumber","value","isNaN","convertedValue","Number","toNumber","hash","substring","replace","async","targetID","fetch","method","headers","Accept","then","response","ok","Error","status","json","target","filter","element","number","iid","filterJson","length","targetURL","title","catch","error","console","goToTargetURL","document","body","innerHTML","getElementById","addEventListener","URLtoShorten","encodeURIComponent","trim","alert"],"mappings":"yBAAO,MAAMA,EAAWC,OAAOC,SAASC,KAAKC,SAAS,UAEhDC,EACL,4EACKC,EAAkB,0CAQXC,EAAcP,EACxBM,EAAkB,aAClBD,EAAkB,oBCXrB,MAAMG,EAAkB,gIDQCR,EAAWM,EAAkBD,wcCHoCJ,OAAOC,SAASC,2BAA2BF,OAAOC,SAASC,glBCFrJ,MACMM,ECPC,SAAkBC,GAExB,GAAqB,iBAAVA,IAAuBC,MAAMD,GACvC,OAAOA,EAIR,MAAME,EAAiBC,OAAOH,GAC9B,OAAKC,MAAMC,GAKJ,KAJCA,CAKT,CDPyBE,CADRb,OAAOC,SAASa,KAAKC,UAAU,GAAGC,QAAQ,OAAQ,KAG/DR,EEFGS,eAA6BC,GAGnCC,MAFYpB,EJCZ,mDAFA,wEIGW,CACVqB,OAAQ,MACRC,QAAS,CACRC,OAAQ,sBAGRC,MAAMC,IACN,IAAKA,EAASC,GACb,MAAM,IAAIC,MAAM,uBAAuBF,EAASG,UAEjD,OAAOH,EAASI,MAAM,IAEtBL,MAAMK,IACN,MAAMC,EAASD,EAAKE,QAAQC,GArB/B,SAAoBA,EAASb,GAC5B,OAAOnB,EAAWgC,EAAQC,QAAUd,EAAWa,EAAQE,KAAOf,CAC/D,CAmB2CgB,CAAWH,EAASb,KAC5D,GAAIW,EAAOM,OAAS,EAAG,CACtB,MAAMC,EAAYP,EAAO,GAAGQ,MAC5BrC,OAAOC,SAASC,KAAOkC,CACvB,KAEDE,OAAOC,IACPC,QAAQD,MAAM,uBAAwBA,EAAM,GAE/C,CFtBCE,CAAcjC,IDQdkC,SAASC,KAAKC,UAAYrC,EIf1BmC,SAASG,eAAe,YAAYC,iBAAiB,SAAS,WAC7D,MAAMC,EAAeC,mBACpBN,SAASG,eAAe,YAAYpC,MAAMwC,QAEvCF,EACH/C,OAAOC,SAASC,KAAOI,EAAcyC,EAErCG,MAAM,kCAET"}